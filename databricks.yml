bundle:
  name: marvel-characters

include:
  - resources/*.yml
  - resources/*.yaml
  - resources/*.json

# Think of artifacts as the built version of your project code that Databricks will actually deploy and run.
# Instead, you package your code into artifacts (like .whl wheels, JARs, or Docker images) that can be:
# * uploaded to Databricks
# * referenced by jobs, clusters, and ML workflows
# üëâ Artifacts = the "compiled/package outputs" of your project

# Reproducibility: Everyone in dev/acc/prd is running the exact same package, not someone‚Äôs half-edited local file.

artifacts:
  default:
    type: whl
    build: uv build
    path: .

# Think of variables as ‚Äúconfig knobs‚Äù for your bundle.
# They can be overridden per environment (so dev, acc, prd can each get different values).
# Examples here:
# * git_sha ‚Üí which commit is being deployed.
# * branch ‚Üí which branch (e.g. main, develop).
# * schedule_pause_status ‚Üí whether scheduled jobs are running (PAUSED vs UNPAUSED).

variables:
  git_sha:
    description: git_sha
    default: abcd
  branch:
    description: branch
    default: main
  schedule_pause_status:
    description: schedule pause status
    default: PAUSED


targets:
# default: true ‚Üí this is the default environment if none is specified.
# mode: development ‚Üí toggles certain behaviors to be more dev-friendly (like deploying into your user workspace instead of shared).
# workspace.root_path ‚Üí your dev jobs/artifacts will go under your /Workspace/Users/... directory to avoid stepping on others.
# profile: marvelous ‚Üí This references a section in ~/.databrickscfg for authentication (Databricks CLI profile name).

  dev:
    default: true
    mode: development
    workspace:
      host: https://dbc-2d131fd0-7558.cloud.databricks.com/
      root_path: /Workspace/Users/${workspace.current_user.userName}/.bundle/${bundle.target}/${bundle.name}
      profile: dbc-2d131fd0-7558
    variables:
      schedule_pause_status: PAUSED

  acc: # (acceptance/testing) 
  # Because acceptance is usually a shared environment where multiple people (QA, data scientists, ML engineers, maybe even product managers) access the same deployed jobs, models, or workflows.

# presets.name_prefix: 'acc_' ‚Üí Jobs, clusters, etc. in this environment will be created with an acc_ prefix (to avoid collisions with prod).
# workspace.root_path: /Shared/... ‚Üí Goes into the shared workspace folder, not your personal workspace.
# Variables ‚Üí here it keeps jobs paused by default.

    presets:
      name_prefix: 'acc_'
    workspace:
      host: https://dbc-2d131fd0-7558.cloud.databricks.com/
      root_path: /Shared/.bundle/${bundle.target}/${bundle.name}
      profile: dbc-2d131fd0-7558
    variables:
      schedule_pause_status: PAUSED

  prd:
# mode: production ‚Üí locks down dev-friendly behaviors. Production deployments are stricter.
# Workspace path is in /Shared (not in user folders).
# Variables ‚Üí schedule_pause_status is set PAUSED here but annotated ‚Äúnormally UNPAUSED‚Äù ‚Üí meaning in real prod you‚Äôd allow jobs to run continuously.

    mode: production
    workspace:
      host: https://dbc-2d131fd0-7558.cloud.databricks.com/
      root_path: /Shared/.bundle/${bundle.target}/${bundle.name}
      profile: dbc-2d131fd0-7558
    variables:
      schedule_pause_status: PAUSED # normally UNPAUSED
